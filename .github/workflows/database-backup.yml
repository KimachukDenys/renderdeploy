name: Restore Database Backup

on:
  push:
    branches:
      - main  # Виконувати при пуші на головну гілку

jobs:
  restore:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Download backup file from GitHub
        run: |
          wget https://github.com/your_username/your_repo/raw/main/backup.sql

      - name: Restore Database to Render
        env:
          DATABASE_URL: ${{ secrets.DATABASE_URL }}  # Замість вашого прямого URL, використовуйте секрет
        run: |
          # Відновлюємо дамп бази даних
          psql $DATABASE_URL -f backup.sql
